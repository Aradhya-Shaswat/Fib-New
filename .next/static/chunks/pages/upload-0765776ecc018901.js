(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[863],{7270:function(e,t,l){(window.__NEXT_P=window.__NEXT_P||[]).push(["/upload",function(){return l(9722)}])},9722:function(e,t,l){"use strict";l.r(t),l.d(t,{default:function(){return g}});var s=l(5893),n=l(7294),o=l(1163),a=l(9583),r=l(5434),i=l(9669),d=l.n(i),c=l(6249),x=l(9729),u=l.n(x),p=l(3454);let m=u()({projectId:"t6ctl7ok",dataset:"production",apiVersion:"2022-03-10",useCdn:!1,token:p.env.NEXT_PUBLIC_SANITY_TOKEN});var f=l(9298),h=l(3339),g=()=>{let[e,t]=(0,n.useState)(""),[l,i]=(0,n.useState)(f.F5[0].name),[x,u]=(0,n.useState)(!1),[p,g]=(0,n.useState)(!1),[b,j]=(0,n.useState)(),[v,N]=(0,n.useState)(!1),y=(0,c.Z)(e=>e.userProfile),w=(0,o.useRouter)();(0,n.useEffect)(()=>{y||w.push("/")},[y,w]);let _=async e=>{let t=e.target.files[0];["video/mp4","video/webm","video/ogg"].includes(t.type)?(N(!1),u(!0),m.assets.upload("file",t,{contentType:t.type,filename:t.name}).then(e=>{j(e),u(!1)})):(u(!1),N(!0))},C=async()=>{if(e&&(null==b?void 0:b._id)&&l){g(!0);let t={_type:"post",caption:e,video:{_type:"file",asset:{_type:"reference",_ref:null==b?void 0:b._id}},userId:null==y?void 0:y._id,postedBy:{_type:"postedBy",_ref:null==y?void 0:y._id},topic:l};await d().post("".concat(h._,"/api/post"),t),w.push("/")}};return(0,s.jsx)("div",{className:"flex w-full h-full absolute left-0 top-[60px] lg:top-[70px] mb-10 pt-10 lg:pt-20 bg-[#F8F8F8] justify-center",children:(0,s.jsxs)("div",{className:" bg-white rounded-lg xl:h-[80vh] flex gap-6 flex-wrap justify-center items-center p-14 pt-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-2xl font-bold",children:"Upload Video"}),(0,s.jsx)("p",{className:"text-md text-gray-400 mt-1",children:"Post a video to your account"})]}),(0,s.jsx)("div",{className:" border-dashed rounded-xl border-4 border-gray-200 flex flex-col justify-center items-center  outline-none mt-10 w-[260px] h-[458px] p-10 cursor-pointer hover:border-red-300 hover:bg-gray-100",children:x?(0,s.jsx)("p",{className:"text-center text-3xl text-red-400 font-semibold",children:"Uploading..."}):(0,s.jsx)("div",{children:b?(0,s.jsxs)("div",{className:" rounded-3xl w-[300px]  p-4 flex flex-col gap-6 justify-center items-center",children:[(0,s.jsx)("video",{className:"rounded-xl h-[462px] mt-16 bg-black",controls:!0,loop:!0,src:null==b?void 0:b.url}),(0,s.jsxs)("div",{className:" flex justify-between gap-20",children:[(0,s.jsx)("p",{className:"text-lg",children:b.originalFilename}),(0,s.jsx)("button",{type:"button",className:" rounded-full bg-gray-200 text-red-400 p-2 text-xl cursor-pointer outline-none hover:shadow-md transition-all duration-500 ease-in-out",onClick:()=>j(void 0),children:(0,s.jsx)(r.ZkW,{})})]})]}):(0,s.jsxs)("label",{className:"cursor-pointer",children:[(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center h-full",children:[(0,s.jsxs)("div",{className:"flex flex-col justify-center items-center",children:[(0,s.jsx)("p",{className:"font-bold text-xl",children:(0,s.jsx)(a.Qvc,{className:"text-gray-300 text-6xl"})}),(0,s.jsx)("p",{className:"text-xl font-semibold",children:"Select video to upload"})]}),(0,s.jsxs)("p",{className:"text-gray-400 text-center mt-10 text-sm leading-10",children:["MP4 or WebM or ogg ",(0,s.jsx)("br",{}),"720x1280 resolution or higher ",(0,s.jsx)("br",{}),"Up to 10 minutes ",(0,s.jsx)("br",{}),"Less than 2 GB"]}),(0,s.jsx)("p",{className:"bg-[#F51997] text-center mt-8 rounded text-white text-md font-medium p-2 w-52 outline-none",children:"Select file"})]}),(0,s.jsx)("input",{type:"file",name:"upload-video",onChange:e=>_(e),className:"w-0 h-0"})]})})}),v&&(0,s.jsx)("p",{className:"text-center text-xl text-red-200 font-semibold mt-4 w-[260px]",children:"Only Video Files are Allowed!"})]}),(0,s.jsxs)("div",{className:"flex flex-col gap-3 pb-10",children:[(0,s.jsx)("label",{className:"text-md font-medium ",children:"Caption"}),(0,s.jsx)("input",{type:"text",value:e,onChange:e=>t(e.target.value),className:"rounded lg:after:w-650 outline-none text-md border-2 border-gray-200 p-2"}),(0,s.jsx)("label",{className:"text-md font-medium ",children:"Choose a topic"}),(0,s.jsx)("select",{onChange:e=>{i(e.target.value)},className:"outline-none lg:w-650 border-2 border-gray-200 text-md capitalize lg:p-4 p-2 rounded cursor-pointer",children:f.F5.map(e=>(0,s.jsx)("option",{className:" outline-none capitalize bg-white text-gray-700 text-md p-2 hover:bg-slate-300",value:e.name,children:e.name},e.name))}),(0,s.jsxs)("div",{className:"flex gap-6 mt-10",children:[(0,s.jsx)("button",{onClick:()=>{g(!1),j(void 0),t(""),i("")},type:"button",className:"border-gray-300 border-2 text-md font-medium p-2 rounded w-28 lg:w-44 outline-none",children:"Discard"}),(0,s.jsx)("button",{disabled:null==b||!b.url,onClick:C,type:"button",className:"bg-[#F51997] text-white text-md font-medium p-2 rounded w-28 lg:w-44 outline-none",children:p?"Posting...":"Post"})]})]})]})})}}},function(e){e.O(0,[228,729,774,888,179],function(){return e(e.s=7270)}),_N_E=e.O()}]);